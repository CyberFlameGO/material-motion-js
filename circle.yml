# From https://circleci.com/docs/yarn/
machine:
  node:
    version: 7.7.4

dependencies:
  override:
    # this has to come first to keep yarn/circle happy
    - echo "workspaces-experimental true" >> ~/.yarnrc

    # upgrade to current yarn
    - yarn config set prefix "/home/ubuntu/.yarn"
    - PATH=$( yarn global bin ):$PATH
    - yarn global add yarn@1
    - yarn config set prefix "/home/ubuntu/.yarn"

    - yarn global add lerna@2
    - lerna bootstrap -- --non-interactive
  cache_directories:
    - ~/.cache/yarn

test:
  override:
    - yarn run ci


# From http://codereview.cc/harbormaster/step/edit/6/
notify:
  webhooks:
    - url: http://codereview.cc/harbormaster/hook/circleci/
